{
    "cells": [
        {
            "language": "typescript",
            "source": [
                "require('dotenv').config()\nconst { readFileSync } = require('fs')\nconst { Wallet, keccak256, assert } = require('ethers')\nconst { JsonRpcProvider, devnetConnection, Secp256k1Keypair, RawSigner, getTransferSuiTransaction, fromB64 } = require('@mysten/sui.js');\nconst { SuiAccountManager } = require('@scallop-dao/sui-kit')\n\nconst provider = new JsonRpcProvider(devnetConnection)"
            ],
            "outputs": []
        },
        {
            "language": "typescript",
            "source": [
                "const publish_log = readFileSync('./publish-output.log', 'utf-8')"
            ],
            "outputs": []
        },
        {
            "language": "typescript",
            "source": [
                "// AdminCap\npublish_log.match(/AdminCap\"\\),\\n\\s+\"objectId\": String\\(\"(0x[0-9a-fA-F]+)\"/)[1]"
            ],
            "outputs": [
                {
                    "items": [
                        {
                            "mime": "text/plain",
                            "value": [
                                "\u001b[32m'0xb6a0d5686d5a5fbbe375bd855a3c9e5eea196ae642d69c43236dc45f963e677d'\u001b[39m"
                            ]
                        }
                    ]
                }
            ]
        },
        {
            "language": "typescript",
            "source": [
                "// GeneralStore\npublish_log.match(/GeneralStore\"\\),\\n\\s+\"objectId\": String\\(\"(0x[0-9a-fA-F]+)\"/)[1]"
            ],
            "outputs": [
                {
                    "items": [
                        {
                            "mime": "text/plain",
                            "value": [
                                "\u001b[32m'0xd51d23f06a5e255a09ca08677ab2f31871f1d70aae80a5f8261c5be9047b668c'\u001b[39m"
                            ]
                        }
                    ]
                }
            ]
        },
        {
            "language": "typescript",
            "source": [
                "// PackageId\npublish_log.match(/\"packageId\": String\\(\"(0x[0-9a-fA-F]+)\"/)[1]"
            ],
            "outputs": [
                {
                    "items": [
                        {
                            "mime": "text/plain",
                            "value": [
                                "\u001b[32m'0xb0eb2fe2a0b06a6b78a81c08d89da7d953aa2b2d3a91439e5728fe26fbdf725e'\u001b[39m"
                            ]
                        }
                    ]
                }
            ]
        },
        {
            "language": "typescript",
            "source": [
                "// USDC, USDT, UCT object\npublish_log.match(/Coin<0x[0-9a-fA-F]+::USDC::USDC>\"\\),\\n\\s+\"objectId\": String\\(\"(0x[0-9a-fA-F]+)/)[1]\npublish_log.match(/Coin<0x[0-9a-fA-F]+::USDT::USDT>\"\\),\\n\\s+\"objectId\": String\\(\"(0x[0-9a-fA-F]+)/)[1]\npublish_log.match(/Coin<0x[0-9a-fA-F]+::UCT::UCT>\"\\),\\n\\s+\"objectId\": String\\(\"(0x[0-9a-fA-F]+)/)[1]"
            ],
            "outputs": [
                {
                    "items": [
                        {
                            "mime": "text/plain",
                            "value": [
                                "\u001b[32m'0xd84bbdd0243bcd3bc94ae1f5bdc1321385fd16bd7e786332dc60fdc6433ffb08'\u001b[39m"
                            ]
                        }
                    ]
                }
            ]
        },
        {
            "language": "typescript",
            "source": [
                "// Digest\npublish_log.match(/----- Transaction Digest ----\\n(.+)/)[1]"
            ],
            "outputs": [
                {
                    "items": [
                        {
                            "mime": "text/plain",
                            "value": [
                                "\u001b[32m'B23eJsoRsRB4Wen8a9g8uvCKJQ8ycMfqGeBbWhivrGu6'\u001b[39m"
                            ]
                        }
                    ]
                }
            ]
        },
        {
            "language": "typescript",
            "source": [
                ""
            ],
            "outputs": []
        },
        {
            "language": "typescript",
            "source": [
                "provider.getAllCoins({ \n    owner: '0x44acc9799ced77c669c376aae77cee0d64ae31f48db81e4a0e5862a3ad8ae00e' \n})//.filter(x => x.coinType == `0xb0eb2fe2a0b06a6b78a81c08d89da7d953aa2b2d3a91439e5728fe26fbdf725e::USDC::USDC`)"
            ],
            "outputs": [
                {
                    "items": [
                        {
                            "mime": "text/plain",
                            "value": [
                                "{",
                                "  data: [",
                                "    {",
                                "      coinType: \u001b[32m'0x2::sui::SUI'\u001b[39m,",
                                "      coinObjectId: \u001b[32m'0x02b4669c31d94468b24e8734d297901fc5f5655e94ced8b3526eb20c05c53fbe'\u001b[39m,",
                                "      version: \u001b[32m'103387'\u001b[39m,",
                                "      digest: \u001b[32m'D5Az9BXAUNd1sCrJ7AbpAf5FE3rzWVNMzWFFtC1J1k7E'\u001b[39m,",
                                "      balance: \u001b[32m'5070204770'\u001b[39m,",
                                "      lockedUntilEpoch: \u001b[1mnull\u001b[22m,",
                                "      previousTransaction: \u001b[32m'AuSAn1K1138ouPuJtve152UmF9Sd6Dy9xYTCFKi3754b'\u001b[39m",
                                "    },",
                                "    {",
                                "      coinType: \u001b[32m'0x388975042398cc3a2bef3e02f1f71108ac604a2b708cbc96c8bad00d32895b25::USDT::USDT'\u001b[39m,",
                                "      coinObjectId: \u001b[32m'0x28c8b1935262bb2ddc2a599ebc7561cdb3f9a953dba47ff15a858d34fb407d9d'\u001b[39m,",
                                "      version: \u001b[32m'102980'\u001b[39m,",
                                "      digest: \u001b[32m'CxVt9jGMyJA1e26ni1oM17cgVw3r5LbEXBZdJSbGmvUL'\u001b[39m,",
                                "      balance: \u001b[32m'100000000000000'\u001b[39m,",
                                "      lockedUntilEpoch: \u001b[1mnull\u001b[22m,",
                                "      previousTransaction: \u001b[32m'14XsB8nUhxex25dLshRULLZHicxahTUx8vnnCrgfUnhX'\u001b[39m",
                                "    },",
                                "    {",
                                "      coinType: \u001b[32m'0xb0eb2fe2a0b06a6b78a81c08d89da7d953aa2b2d3a91439e5728fe26fbdf725e::USDT::USDT'\u001b[39m,",
                                "      coinObjectId: \u001b[32m'0x44488979a53d9bbd8c65c0ef54b5f8c397082623b1b979f4f04c5948e33f5d86'\u001b[39m,",
                                "      version: \u001b[32m'102986'\u001b[39m,",
                                "      digest: \u001b[32m'G6qz5qnvm9YLQ3xt4X9nsUa7Ly7GxACyEe8W3wAq1z1W'\u001b[39m,",
                                "      balance: \u001b[32m'100000000000000'\u001b[39m,",
                                "      lockedUntilEpoch: \u001b[1mnull\u001b[22m,",
                                "      previousTransaction: \u001b[32m'B23eJsoRsRB4Wen8a9g8uvCKJQ8ycMfqGeBbWhivrGu6'\u001b[39m",
                                "    },",
                                "    {",
                                "      coinType: \u001b[32m'0xb0eb2fe2a0b06a6b78a81c08d89da7d953aa2b2d3a91439e5728fe26fbdf725e::USDC::USDC'\u001b[39m,",
                                "      coinObjectId: \u001b[32m'0x464dddd44a9c52877eaa17d6f3c47bf8d1e1fe412bb51a772c67bdedb84ace7b'\u001b[39m,",
                                "      version: \u001b[32m'102986'\u001b[39m,",
                                "      digest: \u001b[32m'AAp6r9SGZ2r7Z3uKFQZEt7YFLTT9CP2qm5u8DjJcDvQC'\u001b[39m,",
                                "      balance: \u001b[32m'100000000000000'\u001b[39m,",
                                "      lockedUntilEpoch: \u001b[1mnull\u001b[22m,",
                                "      previousTransaction: \u001b[32m'B23eJsoRsRB4Wen8a9g8uvCKJQ8ycMfqGeBbWhivrGu6'\u001b[39m",
                                "    },",
                                "    {",
                                "      coinType: \u001b[32m'0xe10ae11d869bfc135f4775fcb5380ec658430f18040d7c3c8e718ff9aec6b397::USDC::USDC'\u001b[39m,",
                                "      coinObjectId: \u001b[32m'0x514d5a7210e73c7978b40a81abb401ae320767b5fd3a363b6f41a2a1d71d39d2'\u001b[39m,",
                                "      version: \u001b[32m'102985'\u001b[39m,",
                                "      digest: \u001b[32m'6mFBKEtfb7kZxFB9bV7Y2wFD4PvZ7b7Z1fK2Muvz4oiA'\u001b[39m,",
                                "      balance: \u001b[32m'100000000000000'\u001b[39m,",
                                "      lockedUntilEpoch: \u001b[1mnull\u001b[22m,",
                                "      previousTransaction: \u001b[32m'6BULEgs9mdtVZyQUZv8ah4uSyerAYqPYiLk6aNCuEubL'\u001b[39m",
                                "    },",
                                "    {",
                                "      coinType: \u001b[32m'0xda27a733f828fbf0532980464c192281f0be8b76d156092aaa3378781aa02a0c::USDT::USDT'\u001b[39m,",
                                "      coinObjectId: \u001b[32m'0x65b0b18c7d334292865c5e27798966e30095ab210a69694ddffac482516ee288'\u001b[39m,",
                                "      version: \u001b[32m'102983'\u001b[39m,",
                                "      digest: \u001b[32m'6GC6fghL2vS5CcehSUjbfA1FPWuKFrdtkd75YaCezieN'\u001b[39m,",
                                "      balance: \u001b[32m'100000000000000'\u001b[39m,",
                                "      lockedUntilEpoch: \u001b[1mnull\u001b[22m,",
                                "      previousTransaction: \u001b[32m'7Q8dHPqvJHvXSW9GwmMoyLaW8S8dnQnbNpBx4zbH6gGQ'\u001b[39m",
                                "    },",
                                "    {",
                                "      coinType: \u001b[32m'0xe10ae11d869bfc135f4775fcb5380ec658430f18040d7c3c8e718ff9aec6b397::USDT::USDT'\u001b[39m,",
                                "      coinObjectId: \u001b[32m'0x66ffefb2da8a5b8852ef4b0d2461a727d13d2a36765ba09c2cfecc90d27738e0'\u001b[39m,",
                                "      version: \u001b[32m'102985'\u001b[39m,",
                                "      digest: \u001b[32m'JAQPp3Ph25QAkVFnRjU2stj4deYtqzup81osFLVPLwPY'\u001b[39m,",
                                "      balance: \u001b[32m'100000000000000'\u001b[39m,",
                                "      lockedUntilEpoch: \u001b[1mnull\u001b[22m,",
                                "      previousTransaction: \u001b[32m'6BULEgs9mdtVZyQUZv8ah4uSyerAYqPYiLk6aNCuEubL'\u001b[39m",
                                "    },",
                                "    {",
                                "      coinType: \u001b[32m'0x388975042398cc3a2bef3e02f1f71108ac604a2b708cbc96c8bad00d32895b25::USDC::USDC'\u001b[39m,",
                                "      coinObjectId: \u001b[32m'0x79a98116c52ccd697bc84b5959a033c7d7d23dda6dd3927ee547bf9450ee6287'\u001b[39m,",
                                "      version: \u001b[32m'102980'\u001b[39m,",
                                "      digest: \u001b[32m'Fvu8QsCienpBm4GJoKWaftWEks9NEJ7qqufiz1m4gUbc'\u001b[39m,",
                                "      balance: \u001b[32m'100000000000000'\u001b[39m,",
                                "      lockedUntilEpoch: \u001b[1mnull\u001b[22m,",
                                "      previousTransaction: \u001b[32m'14XsB8nUhxex25dLshRULLZHicxahTUx8vnnCrgfUnhX'\u001b[39m",
                                "    },",
                                "    {",
                                "      coinType: \u001b[32m'0xe1567516174d6e7f7155c439f75f779aa52c5901f8bee24b0385532ee27a9f1a::UCT::UCT'\u001b[39m,",
                                "      coinObjectId: \u001b[32m'0x90bad561255554b9bd51a9228de4db30518286af75b73564d68dd03f302a4b3f'\u001b[39m,",
                                "      version: \u001b[32m'102982'\u001b[39m,",
                                "      digest: \u001b[32m'AvZ3ZffKg9aWqvrh6bo9mHBYXgc38JgYHR9Kq3qMhDK9'\u001b[39m,",
                                "      balance: \u001b[32m'100000000000000'\u001b[39m,",
                                "      lockedUntilEpoch: \u001b[1mnull\u001b[22m,",
                                "      previousTransaction: \u001b[32m'Aq718gBVXRvNjavqGRPzvdLNVnjHRBkNU7DTMCFLqxVz'\u001b[39m",
                                "    },",
                                "    {",
                                "      coinType: \u001b[32m'0xf89dc9da6d442eed24e2524ff3d1f31dc76c0e5d0bcaaa913b3530f6a7e9585::usdc::USDC'\u001b[39m,",
                                "      coinObjectId: \u001b[32m'0x930c4be4e607f71dbfa63bbc502bb646cdf8b1b35ab2ab490a694b75cc0c4743'\u001b[39m,",
                                "      version: \u001b[32m'33819'\u001b[39m,",
                                "      digest: \u001b[32m'CDWeXFZWACkeMFzJT5BifgEcjdV4yiBjxaD4TYXqdwaD'\u001b[39m,",
                                "      balance: \u001b[32m'99999760000000'\u001b[39m,",
                                "      lockedUntilEpoch: \u001b[1mnull\u001b[22m,",
                                "      previousTransaction: \u001b[32m'A9VAroWTPmSPY9whEsDjxrnxNNA9meRoyR1j8KbDs7ML'\u001b[39m",
                                "    },",
                                "    {",
                                "      coinType: \u001b[32m'0x388975042398cc3a2bef3e02f1f71108ac604a2b708cbc96c8bad00d32895b25::UCT::UCT'\u001b[39m,",
                                "      coinObjectId: \u001b[32m'0xb13287a779b116518eedfc272041484fc0ad44330a0d3628d0703552bae2ec81'\u001b[39m,",
                                "      version: \u001b[32m'102980'\u001b[39m,",
                                "      digest: \u001b[32m'Ds66nWa44eLuT3aP5w9HdfAFLbnuDLrAamWMQUB7nr4f'\u001b[39m,",
                                "      balance: \u001b[32m'100000000000000'\u001b[39m,",
                                "      lockedUntilEpoch: \u001b[1mnull\u001b[22m,",
                                "      previousTransaction: \u001b[32m'14XsB8nUhxex25dLshRULLZHicxahTUx8vnnCrgfUnhX'\u001b[39m",
                                "    },",
                                "    {",
                                "      coinType: \u001b[32m'0xf89dc9da6d442eed24e2524ff3d1f31dc76c0e5d0bcaaa913b3530f6a7e9585::usdc::USDC'\u001b[39m,",
                                "      coinObjectId: \u001b[32m'0xba5aec5fe3db3fd2ab0432afefd972bd62a41d62be4e1b2342c8a3033884c6c6'\u001b[39m,",
                                "      version: \u001b[32m'33818'\u001b[39m,",
                                "      digest: \u001b[32m'6nizq1K683vUXxSRKBWVjJ2z3KwdrqvJWSQ6oyYLYPS7'\u001b[39m,",
                                "      balance: \u001b[32m'500000000'\u001b[39m,",
                                "      lockedUntilEpoch: \u001b[1mnull\u001b[22m,",
                                "      previousTransaction: \u001b[32m'DVJgVYYK3bPaTrxi2XmQg8Y3squUSE7m65mztgnoCyzC'\u001b[39m",
                                "    },",
                                "    {",
                                "      coinType: \u001b[32m'0xb0eb2fe2a0b06a6b78a81c08d89da7d953aa2b2d3a91439e5728fe26fbdf725e::UCT::UCT'\u001b[39m,",
                                "      coinObjectId: \u001b[32m'0xd84bbdd0243bcd3bc94ae1f5bdc1321385fd16bd7e786332dc60fdc6433ffb08'\u001b[39m,",
                                "      version: \u001b[32m'102986'\u001b[39m,",
                                "      digest: \u001b[32m'6nfufEmePPFTeHkSQMP5ZT6U4EMVhDKZkJzej2Jards5'\u001b[39m,",
                                "      balance: \u001b[32m'100000000000000'\u001b[39m,",
                                "      lockedUntilEpoch: \u001b[1mnull\u001b[22m,",
                                "      previousTransaction: \u001b[32m'B23eJsoRsRB4Wen8a9g8uvCKJQ8ycMfqGeBbWhivrGu6'\u001b[39m",
                                "    },",
                                "    {",
                                "      coinType: \u001b[32m'0xe1567516174d6e7f7155c439f75f779aa52c5901f8bee24b0385532ee27a9f1a::USDT::USDT'\u001b[39m,",
                                "      coinObjectId: \u001b[32m'0xdec8169de0038f99f2534fc9ee0f45f2da526ad0bc83cac15c78ece00113ed72'\u001b[39m,",
                                "      version: \u001b[32m'102982'\u001b[39m,",
                                "      digest: \u001b[32m'9Lqhx9iMNdn5BYbT8Yd9zJ71QwFknoVfo3q62hFAimox'\u001b[39m,",
                                "      balance: \u001b[32m'100000000000000'\u001b[39m,",
                                "      lockedUntilEpoch: \u001b[1mnull\u001b[22m,",
                                "      previousTransaction: \u001b[32m'Aq718gBVXRvNjavqGRPzvdLNVnjHRBkNU7DTMCFLqxVz'\u001b[39m",
                                "    },",
                                "    {",
                                "      coinType: \u001b[32m'0xda27a733f828fbf0532980464c192281f0be8b76d156092aaa3378781aa02a0c::UCT::UCT'\u001b[39m,",
                                "      coinObjectId: \u001b[32m'0xf4c363d4e05a00daf8785121ea0dd1f93f21fac60041b104fc16395e2daa7c33'\u001b[39m,",
                                "      version: \u001b[32m'102983'\u001b[39m,",
                                "      digest: \u001b[32m'3dW288tB8boMqcbrzSZL8HdWvT5CLRzWcbSdKVNHFc83'\u001b[39m,",
                                "      balance: \u001b[32m'100000000000000'\u001b[39m,",
                                "      lockedUntilEpoch: \u001b[1mnull\u001b[22m,",
                                "      previousTransaction: \u001b[32m'7Q8dHPqvJHvXSW9GwmMoyLaW8S8dnQnbNpBx4zbH6gGQ'\u001b[39m",
                                "    },",
                                "    {",
                                "      coinType: \u001b[32m'0xe10ae11d869bfc135f4775fcb5380ec658430f18040d7c3c8e718ff9aec6b397::UCT::UCT'\u001b[39m,",
                                "      coinObjectId: \u001b[32m'0xf9c3b1c5eae93c434d7d906c1f1a53494029cff4732aa8a7d2dbf11cf6b10a9e'\u001b[39m,",
                                "      version: \u001b[32m'102985'\u001b[39m,",
                                "      digest: \u001b[32m'DCNug2uoKNbfmormGioC2V7p1aweRnd3ZpnEmcB9zkvm'\u001b[39m,",
                                "      balance: \u001b[32m'100000000000000'\u001b[39m,",
                                "      lockedUntilEpoch: \u001b[1mnull\u001b[22m,",
                                "      previousTransaction: \u001b[32m'6BULEgs9mdtVZyQUZv8ah4uSyerAYqPYiLk6aNCuEubL'\u001b[39m",
                                "    },",
                                "    {",
                                "      coinType: \u001b[32m'0xe1567516174d6e7f7155c439f75f779aa52c5901f8bee24b0385532ee27a9f1a::USDC::USDC'\u001b[39m,",
                                "      coinObjectId: \u001b[32m'0xfb08f450028583c496fcbcfad79116df87acf72664b471a3969cd2e5c25a4844'\u001b[39m,",
                                "      version: \u001b[32m'102982'\u001b[39m,",
                                "      digest: \u001b[32m'B4tfdXYjswn583ofemAkTPYBbcUdWKjKYHKqWwUMCRfe'\u001b[39m,",
                                "      balance: \u001b[32m'100000000000000'\u001b[39m,",
                                "      lockedUntilEpoch: \u001b[1mnull\u001b[22m,",
                                "      previousTransaction: \u001b[32m'Aq718gBVXRvNjavqGRPzvdLNVnjHRBkNU7DTMCFLqxVz'\u001b[39m",
                                "    },",
                                "    {",
                                "      coinType: \u001b[32m'0xda27a733f828fbf0532980464c192281f0be8b76d156092aaa3378781aa02a0c::USDC::USDC'\u001b[39m,",
                                "      coinObjectId: \u001b[32m'0xfd5b6c66f3cf6a230428001d7975565e9a4f80f090a4b0793c754079166ddbe0'\u001b[39m,",
                                "      version: \u001b[32m'102983'\u001b[39m,",
                                "      digest: \u001b[32m'2BrRvf1GraPjimCGBaf9oUW5YpLPwF2Exg4MRAzyEh66'\u001b[39m,",
                                "      balance: \u001b[32m'100000000000000'\u001b[39m,",
                                "      lockedUntilEpoch: \u001b[1mnull\u001b[22m,",
                                "      previousTransaction: \u001b[32m'7Q8dHPqvJHvXSW9GwmMoyLaW8S8dnQnbNpBx4zbH6gGQ'\u001b[39m",
                                "    }",
                                "  ],",
                                "  nextCursor: \u001b[32m'0xfd5b6c66f3cf6a230428001d7975565e9a4f80f090a4b0793c754079166ddbe0'\u001b[39m,",
                                "  hasNextPage: \u001b[33mfalse\u001b[39m",
                                "}"
                            ]
                        }
                    ]
                }
            ]
        },
        {
            "language": "typescript",
            "source": [
                "console.log(r)"
            ],
            "outputs": [
                {
                    "items": [
                        {
                            "mime": "application/vnd.code.notebook.stdout",
                            "value": [
                                "Promise {",
                                "  {",
                                "    data: [",
                                "      [Object], [Object], [Object],",
                                "      [Object], [Object], [Object],",
                                "      [Object], [Object], [Object],",
                                "      [Object], [Object], [Object],",
                                "      [Object], [Object], [Object],",
                                "      [Object], [Object], [Object]",
                                "    ],",
                                "    nextCursor: '0xfd5b6c66f3cf6a230428001d7975565e9a4f80f090a4b0793c754079166ddbe0',",
                                "    hasNextPage: false",
                                "  },",
                                "  [Symbol(async_id_symbol)]: 951,",
                                "  [Symbol(trigger_async_id_symbol)]: 14",
                                "}",
                                ""
                            ]
                        }
                    ]
                }
            ]
        },
        {
            "language": "typescript",
            "source": [
                ""
            ],
            "outputs": []
        }
    ]
}